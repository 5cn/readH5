(function(e){var t={},i,n,o,r,u=750,a;function l(e,t,i,n){return Math.abs(e-t)>=Math.abs(i-n)?e-t>0?"Left":"Right":i-n>0?"Up":"Down"}function c(){r=null;if(t.last){t.el.trigger("longTap");t={}}}function f(){if(r)clearTimeout(r);r=null}function p(){if(i)clearTimeout(i);if(n)clearTimeout(n);if(o)clearTimeout(o);if(r)clearTimeout(r);i=n=o=r=null;t={}}function s(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function g(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}e(document).ready(function(){var T,d,h=0,w=0,y,m;if("MSGesture"in window){a=new MSGesture;a.target=document.body}e(document).bind("MSGestureEnd",function(e){var i=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(i){t.el.trigger("swipe");t.el.trigger("swipe"+i)}}).on("touchstart MSPointerDown pointerdown",function(n){if((m=g(n,"down"))&&!s(n))return;y=m?n:n.touches[0];if(n.touches&&n.touches.length===1&&t.x2){t.x2=undefined;t.y2=undefined}T=Date.now();d=T-(t.last||T);t.el=e("tagName"in y.target?y.target:y.target.parentNode);i&&clearTimeout(i);t.x1=y.pageX;t.y1=y.pageY;if(d>0&&d<=250)t.isDoubleTap=true;t.last=T;r=setTimeout(c,u);if(a&&m)a.addPointer(n.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((m=g(e,"move"))&&!s(e))return;y=m?e:e.touches[0];f();t.x2=y.pageX;t.y2=y.pageY;h+=Math.abs(t.x1-t.x2);w+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(r){if((m=g(r,"up"))&&!s(r))return;f();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)o=setTimeout(function(){t.el.trigger("swipe");t.el.trigger("swipe"+l(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(h<30&&w<30){n=setTimeout(function(){var n=e.Event("tap");n.cancelTouch=p;if(t.el){t.el.trigger(n)}if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else{i=setTimeout(function(){i=null;if(t.el)t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}h=w=0}).on("touchcancel MSPointerCancel pointercancel",p);e(window).on("scroll",p)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto);